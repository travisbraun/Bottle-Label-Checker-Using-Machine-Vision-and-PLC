"use strict";var TcHmi;!function(TcHmi){!function(Controls){!function(Helpers){class SplitView extends HTMLElement{static resizeBarTolerance=8;constructor(options){super(),options?.alignment?this.__alignment=options.alignment:"horizontal"===this.dataset.alignment?this.__alignment=SplitView.Alignment.horizontal:"vertical"===this.dataset.alignment?this.__alignment=SplitView.Alignment.vertical:this.__alignment=SplitView.Alignment.horizontal,this.style.display="flex",this.style.position="relative",this.__alignment===SplitView.Alignment.horizontal?this.style.flexDirection="row":this.style.flexDirection="column"}__alignment=SplitView.Alignment.horizontal;__resizeInProgress=!1;__startPointerPos=0;__startSize=0;__children;connectedCallback(){const children=Array.from(this.children);2===children.length?(this.__children=children,this.addEventListener("pointermove",this.__onPointerMoveOverContainer),this.addEventListener("pointerleave",this.__onPointerLeaveContainer),this.addEventListener("pointerdown",this.__onPointerDownContainer)):TcHmi.Log.error("SplitView requires exactly two child elements.")}setInitialFlexProperties(){this.__children&&(this.__children[0].style.flex="0 1 auto",this.__children[1].style.flex="1 1 0")}disconnectedCallback(){this.__removeEvents()}__onPointerMoveOverContainer=e=>{if(this.__resizeInProgress)return;const firstChildRect=this.children[0].getBoundingClientRect();let pos,isNearDivider=!1;this.__alignment===SplitView.Alignment.horizontal?(pos=e.clientX,Math.abs(pos-firstChildRect.right)<=SplitView.resizeBarTolerance&&(isNearDivider=!0)):(pos=e.clientY,Math.abs(pos-firstChildRect.bottom)<=SplitView.resizeBarTolerance&&(isNearDivider=!0)),isNearDivider?(this.addEventListener("dblclick",this.__onDoubleClick),this.style.cursor=this.__alignment===SplitView.Alignment.horizontal?"col-resize":"row-resize"):(this.removeEventListener("dblclick",this.__onDoubleClick),this.style.cursor="")};__onPointerLeaveContainer=e=>{this.__resizeInProgress||(this.style.cursor="")};__onPointerDownContainer=e=>{const firstChildRect=this.children[0].getBoundingClientRect();let pos,isNearDivider=!1;this.__alignment===SplitView.Alignment.horizontal?(pos=e.clientX,Math.abs(pos-firstChildRect.right)<=SplitView.resizeBarTolerance&&(isNearDivider=!0)):(pos=e.clientY,Math.abs(pos-firstChildRect.bottom)<=SplitView.resizeBarTolerance&&(isNearDivider=!0)),isNearDivider&&(this.__resizeInProgress=!0,this.__startPointerPos=this.__alignment===SplitView.Alignment.horizontal?e.clientX:e.clientY,this.__startSize=this.__alignment===SplitView.Alignment.horizontal?firstChildRect.width:firstChildRect.height,document.addEventListener("pointermove",this.__onPointerMove),document.addEventListener("pointerup",this.__onPointerUp),this.style.cursor=this.__alignment===SplitView.Alignment.horizontal?"col-resize":"row-resize")};__onPointerMove=e=>{if(!this.__resizeInProgress)return;const rect=this.getBoundingClientRect();let currentPos;currentPos=this.__alignment===SplitView.Alignment.horizontal?e.clientX:e.clientY;const delta=currentPos-this.__startPointerPos,newSize=this.__startSize+delta,[first,second]=Array.from(this.children),totalSize=this.__alignment===SplitView.Alignment.horizontal?rect.width:rect.height;newSize<50||totalSize-newSize<50||(this.__alignment,SplitView.Alignment.horizontal,first.style.flex=`0 0 ${newSize}px`,second.style.flex=`1 1 calc(100% - ${newSize}px)`)};__onPointerUp=e=>{this.__resizeInProgress&&(this.__resizeInProgress=!1,document.removeEventListener("pointermove",this.__onPointerMove),document.removeEventListener("pointerup",this.__onPointerUp),this.style.cursor="")};__onDoubleClick=e=>{this.setInitialFlexProperties()};__removeEvents(){this.addEventListener("dblclick",this.__onDoubleClick),this.removeEventListener("pointermove",this.__onPointerMoveOverContainer),this.removeEventListener("pointerleave",this.__onPointerLeaveContainer),this.removeEventListener("pointerdown",this.__onPointerDownContainer),document.removeEventListener("pointermove",this.__onPointerMove),document.removeEventListener("pointerup",this.__onPointerUp)}isResizeInProgress(){return this.__resizeInProgress}}Helpers.SplitView=SplitView,function(SplitView){let Alignment;!function(Alignment){Alignment[Alignment.horizontal=0]="horizontal",Alignment[Alignment.vertical=1]="vertical"}(Alignment=SplitView.Alignment||(SplitView.Alignment={}))}(SplitView=Helpers.SplitView||(Helpers.SplitView={})),customElements.define("tchmi-split-view",SplitView)}(Controls.Helpers||(Controls.Helpers={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={}));