"use strict";var TcHmi;!function(TcHmi){!function(Controls){!function(Beckhoff){class TcHmiTabNavigation extends TcHmi.Controls.System.TcHmiControl{static#tchmiFQN="TcHmi.Controls.Beckhoff."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot;__elementContentTabs;__tabs;__oldTabs;__newTabsData=!1;__fileHostAttributesCache=new Map;__activeTabName;__initialTabName;__tabAlignment;__textHorizontalAlignment;__textVerticalAlignment;__textFontSize;__textFontSizeUnit;__textFontFamily;__textFontStyle;__textFontWeight;__textPadding;__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiTabNavigation-template")[0],this.__elementContentTabs=this.__elementTemplateRoot.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTabNavigation-content-tabs")[0],!this.__elementTemplateRoot||!this.__elementContentTabs)throw new Error("Invalid Template.html");super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__elementContentTabs.addTabChangeCallback(this.__tabChangeCallback),this.__processTabs(),this.setActiveTabName(this.__initialTabName||this.__activeTabName||(this.__tabs?.[0].name??null))}__detach(){super.__detach(),this.__elementContentTabs.removeTabChangeCallback(this.__tabChangeCallback)}destroy(){this.__keepAlive||super.destroy()}__tabChangeCallback=newTabName=>{if(!this.__tabs)return;let oldTab=this.__tabs.find((tab=>tab.name===this.__activeTabName));oldTab&&(oldTab.targetFileHostPreload||oldTab.targetFileHostKeepAlive?oldTab.targetFileHostPreAttach||this.__detachTargetFileHost(oldTab):(this.__detachTargetFileHost(oldTab),oldTab.fileHost?.destroy(),oldTab.fileHost=void 0)),this.setActiveTabName(newTabName);let activeTab=this.__tabs.find((tab=>tab.name===newTabName));activeTab&&(activeTab.fileHost||this.__buildFileHost(activeTab),document.body.contains(activeTab.fileHost?.getElement()[0]??null)||this.__attachTargetFileHost(activeTab))};__buildFileHost(tab){if(tab.fileHost&&(tab.fileHost.destroy(),tab.fileHost=void 0),!tab.targetFile)return;let path=tab.targetFile.path,attributes=tab.targetFile.attributes;if(path)if(path.toLowerCase().endsWith(".content")){let attributesExtended={"data-tchmi-target-content":path,"data-tchmi-left":0,"data-tchmi-top":0,"data-tchmi-width":100,"data-tchmi-height":100,"data-tchmi-width-unit":"%","data-tchmi-height-unit":"%","data-tchmi-scrolling":tab.scrolling??"Auto"};tab.fileHost=TcHmi.ControlFactory.createEx("TcHmi.Controls.System.TcHmiRegion",this.getId()+".Region_"+tab.name,{...attributesExtended},this)}else if(path.toLowerCase().endsWith(".usercontrol")){let attributesExtended={"data-tchmi-target-user-control":path,"data-tchmi-left":0,"data-tchmi-top":0,"data-tchmi-width":100,"data-tchmi-height":100,"data-tchmi-width-unit":"%","data-tchmi-height-unit":"%"};tab.fileHost=TcHmi.ControlFactory.createEx("TcHmi.Controls.System.TcHmiUserControlHost",this.getId()+".UserControlHost_"+tab.name,{...attributes,...attributesExtended},this)}}__attachTargetFileHost(tab){tab.fileHost&&tab.contentElement&&(tab.contentElement.textContent="",tab.contentElement.append(tab.fileHost.getElement()[0]))}__detachTargetFileHost(tab){tab.fileHost?.getElement()[0].remove()}__buildLink(tab){switch(tab.linkElement=document.createElement("tchmi-tab-link"),tab.linkElement.textContent="",tab.linkElement.classList.add("tchmi-tab-navigation-tab-link"),tab.iconElement&&tab.linkElement.append(tab.iconElement),tab.linkElement.insertAdjacentHTML("beforeend",tab.displayName),tab.horizontalAlignment){case"Left":tab.linkElement.style.justifyContent="flex-start";break;case"Center":tab.linkElement.style.justifyContent="center";break;case"Right":tab.linkElement.style.justifyContent="flex-end";break;default:tab.linkElement.style.justifyContent=""}switch(tab.verticalAlignment){case"Top":tab.linkElement.style.alignItems="flex-start";break;case"Center":tab.linkElement.style.alignItems="center";break;case"Bottom":tab.linkElement.style.alignItems="flex-end";break;default:tab.linkElement.style.alignItems=""}}__buildIcon(tab){tab.icon?(tab.iconElement=document.createElement("div"),tab.iconElement.classList.add("tab-icon"),tab.iconElement.style.backgroundImage=`url(${tab.icon.iconPath})`,tab.iconElement.style.backgroundSize=(tab.icon.iconWidth??32)+(tab.icon.iconWidthUnit??"px")+" "+(tab.icon.iconHeight??32)+(tab.icon.iconHeightUnit??"px"),tab.iconElement.style.backgroundRepeat="no-repeat",tab.iconElement.style.height=(tab.icon.iconHeight??32)+(tab.icon.iconHeightUnit??"px"),tab.iconElement.style.width=(tab.icon.iconWidth??32)+(tab.icon.iconWidthUnit??"px"),tab.iconElement.style.minWidth=(tab.icon.iconWidth??32)+(tab.icon.iconWidthUnit??"px")):tab.iconElement=void 0}__removeTabs(tabs,destroy=!1){if(tabs)for(const tab of tabs)tab.fileHost&&destroy&&(tab.fileHost.destroy(),tab.fileHost=void 0),this.__elementContentTabs.removeContentTab(tab.name)}setTabs(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Tabs")),this.__newTabsData=!0;let resolverInfo=this.__objectResolvers.get("tab");if(resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy()),this.__fileHostAttributesCache=new Map,null!==convertedValue)for(let value of convertedValue)value.targetFile&&value.targetFile.attributes&&(this.__fileHostAttributesCache.set(value.name,value.targetFile.attributes),"string"!=typeof value.targetFile.attributes&&(value.targetFile.attributes=void 0));let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,this);this.__objectResolvers.set("tab",{resolver:resolver,watchCallback:this.__onResolverForTabsWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTabsWatchCallback)})}__onResolverForTabsWatchCallback=data=>{this.__isAttached||this.__suspendObjectResolver("Tabs"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__tabs)||(this.__newTabsData&&(this.__newTabsData=!1,this.__removeTabs(this.__tabs,!0)),this.__oldTabs=this.__tabs,this.__tabs=data.value,this.__fileHostAttributesCache.forEach(((fileHostAttributes,name)=>{if(this.__tabs)for(let tab of this.__tabs)tab.name===name&&"object"==typeof tab.targetFile&&"string"!=typeof fileHostAttributes&&(tab.targetFile.attributes=fileHostAttributes)})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Tabs"}),this.__processTabs()):TcHmi.Log.errorEx("[Source=Control, Module="+this.__type+(TcHmiTabNavigation.#tchmiFQN!==this.__type?", Origin="+TcHmiTabNavigation.#tchmiFQN:"")+", Id="+this.getId()+", Attribute=Tabs] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))};getTabs(){return this.__tabs}__processTabs(){if(!this.__isAttached||!this.__tabs)return;let activeTabIndex=0;this.__oldTabs?(activeTabIndex=this.__oldTabs?.findIndex((tab=>tab.name===this.__elementContentTabs.activeTab)),this.__removeTabs(this.__oldTabs)):this.__activeTabName&&(activeTabIndex=this.__tabs?.findIndex((tab=>tab.name===this.__activeTabName))),-1===activeTabIndex&&(activeTabIndex=0);for(let i=0;i<this.__tabs.length;i++){let tab=this.__tabs[i];if(tab.hidden)continue;let oldTab=this.__oldTabs?.find((current=>current.targetFile&&tab.targetFile&&current.targetFile.path===tab.targetFile.path));if(oldTab&&!tab.fileHost){!!tchmi_equal(tab.targetFile.attributes,oldTab.targetFile.attributes)&&tab.targetFileHostPreload?(tab.fileHost=oldTab.fileHost,tab.contentElement=oldTab.contentElement,tab.linkElement=oldTab.linkElement,tab.iconElement=oldTab.iconElement,oldTab.fileHost=void 0):(oldTab.fileHost?.destroy(),oldTab.fileHost=void 0)}tab.contentElement||(tab.contentElement=document.createElement("tchmi-tab-content")),!tab.fileHost&&tab.targetFileHostPreload&&this.__buildFileHost(tab),tab.targetFileHostPreload&&tab.targetFileHostPreAttach&&this.__attachTargetFileHost(tab),tab.linkElement&&tab.displayName===oldTab?.displayName&&tchmi_equal(tab.icon,oldTab?.icon)&&tab.horizontalAlignment===oldTab?.horizontalAlignment&&tab.verticalAlignment===oldTab?.verticalAlignment||(this.__buildIcon(tab),this.__buildLink(tab)),tab.contentElement&&tab.linkElement&&this.__elementContentTabs.addContentTab(tab.name,tab.linkElement,tab.contentElement),i===activeTabIndex&&this.__elementContentTabs.openTab(tab.name)}if(this.__oldTabs)for(const oldTab of this.__oldTabs)oldTab.fileHost?.destroy(),oldTab.fileHost=void 0;this.__isAttached&&(this.__processTextVerticalAlignment(),this.__processTextHorizontalAlignment(),this.__processTextFontSize(),this.__processTextFontFamily(),this.__processTextPadding(),this.__processTextFontWeight(),this.__processTextFontStyle())}setTabAlignment(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);if(null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TabAlignment")),convertedValue!==this.__tabAlignment){switch(convertedValue){case"Right":case"Bottom":case"Left":this.__tabAlignment=convertedValue;break;default:this.__tabAlignment="Top"}TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TabAlignment"}),this.__processTabAlignment()}}getTabAlignment(){return this.__tabAlignment}__processTabAlignment(){this.__tabAlignment&&this.__elementContentTabs.setTabAlignment(this.__tabAlignment)}setActiveTabName(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ActiveTabName")),convertedValue!==this.__activeTabName&&(this.__activeTabName=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActiveTabName"}),this.__processActiveTabName())}getActiveTabName(){return this.__activeTabName}__processActiveTabName(){this.__activeTabName&&this.__elementContentTabs.activeTab!==this.__activeTabName&&this.__isAttached&&this.__elementContentTabs.openTab(this.__activeTabName)}setInitialTabName(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("InitialTabName")),convertedValue!==this.__initialTabName&&(this.__initialTabName=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"InitialTabName"}))}getInitialTabName(){return this.__initialTabName}__processBorderRadius(){super.__processBorderRadius(),TcHmi.StyleProvider.processBorderRadius(this.__elementContentTabs,this.__borderRadius)}setTextHorizontalAlignment(valueNew){let convertedValue=TcHmi.ValueConverter.toHorizontalAlignment(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextHorizontalAlignment")),convertedValue!==this.__textHorizontalAlignment&&(this.__textHorizontalAlignment=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextHorizontalAlignment"}),this.__processTextHorizontalAlignment())}getTextHorizontalAlignment(){return this.__textHorizontalAlignment}__processTextHorizontalAlignment(){for(let tab of this.__tabs??[])tab.linkElement&&TcHmi.StyleProvider.processContentHorizontalAlignment(tab.linkElement,this.__textHorizontalAlignment);let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&TcHmi.StyleProvider.processContentHorizontalAlignment(selectedOverflowElement,this.__textHorizontalAlignment)}setTextVerticalAlignment(valueNew){let convertedValue=TcHmi.ValueConverter.toVerticalAlignment(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextVerticalAlignment")),convertedValue!==this.__textVerticalAlignment&&(this.__textVerticalAlignment=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextVerticalAlignment"}),this.__processTextVerticalAlignment())}getTextVerticalAlignment(){return this.__textVerticalAlignment}__processTextVerticalAlignment(){for(let tab of this.__tabs??[])tab.linkElement&&TcHmi.StyleProvider.processContentVerticalAlignment(tab.linkElement,this.__textVerticalAlignment);let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&TcHmi.StyleProvider.processContentVerticalAlignment(selectedOverflowElement,this.__textVerticalAlignment)}setTextFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSize")),convertedValue!==this.__textFontSize&&(this.__textFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSize"}),this.__processTextFontSize())}getTextFontSize(){return this.__textFontSize}__processTextFontSize(){for(let tab of this.__tabs??[])tab.linkElement&&(this.__textFontSize?tab.linkElement.style.fontSize=this.__textFontSize+(this.__textFontSizeUnit??"px"):tab.linkElement.style.fontSize="");let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&(this.__textFontSize?selectedOverflowElement.style.fontSize=this.__textFontSize+(this.__textFontSizeUnit??"px"):selectedOverflowElement.style.fontSize="")}setTextFontSizeUnit(valueNew){let convertedValue=TcHmi.ValueConverter.toFontSizeUnit(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSizeUnit")),convertedValue!==this.__textFontSizeUnit&&(this.__textFontSizeUnit=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSizeUnit"}),this.__processTextFontSizeUnit())}getTextFontSizeUnit(){return this.__textFontSizeUnit}__processTextFontSizeUnit(){this.__processTextFontSize()}setTextFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toFontFamily(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontFamily")),convertedValue!==this.__textFontFamily&&(this.__textFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontFamily"}),this.__processTextFontFamily())}getTextFontFamily(){return this.__textFontFamily}__processTextFontFamily(){for(let tab of this.__tabs??[])tab.linkElement&&(tab.linkElement.style.fontFamily=this.__textFontFamily??"");let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&(selectedOverflowElement.style.fontFamily=this.__textFontFamily??"")}setTextFontStyle(valueNew){let convertedValue=TcHmi.ValueConverter.toFontStyle(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontStyle")),convertedValue!==this.__textFontStyle&&(this.__textFontStyle=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontStyle"}),this.__processTextFontStyle())}getTextFontStyle(){return this.__textFontStyle}__processTextFontStyle(){for(let tab of this.__tabs??[])tab.linkElement&&TcHmi.StyleProvider.processFontStyle(tab.linkElement,this.__textFontStyle);let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&TcHmi.StyleProvider.processFontStyle(selectedOverflowElement,this.__textFontStyle)}setTextFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontWeight")),convertedValue!==this.__textFontWeight&&(this.__textFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontWeight"}),this.__processTextFontWeight())}getTextFontWeight(){return this.__textFontWeight}__processTextFontWeight(){for(let tab of this.__tabs??[])tab.linkElement&&TcHmi.StyleProvider.processFontWeight(tab.linkElement,this.__textFontWeight);let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&TcHmi.StyleProvider.processFontWeight(selectedOverflowElement,this.__textFontWeight)}setTextPadding(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextPadding"));let resolverInfo=this.__objectResolvers.get("textPadding");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,this);this.__objectResolvers.set("textPadding",{resolver:resolver,watchCallback:this.__onResolverForTextPaddingWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTextPaddingWatchCallback)})}__onResolverForTextPaddingWatchCallback=data=>{this.__isAttached||this.__suspendObjectResolver("textPadding"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__textPadding)||(this.__textPadding=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextPadding"}),this.__processTextPadding()):TcHmi.Log.errorEx("[Source=Control, Module="+this.__type+(TcHmiTabNavigation.#tchmiFQN!==this.__type?", Origin="+TcHmiTabNavigation.#tchmiFQN:"")+", Id="+this.getId()+", Attribute=TextPadding] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))};getTextPadding(){return this.__textPadding}__processTextPadding(){for(let tab of this.__tabs??[])tab.linkElement&&TcHmi.StyleProvider.processContentPadding(tab.linkElement,this.__textPadding);let selectedOverflowElement=this.__elementContentTabs.querySelector("tchmi-tab-links-overflow tchmi-tab-link");selectedOverflowElement&&TcHmi.StyleProvider.processContentPadding(selectedOverflowElement,this.__textPadding)}}Beckhoff.TcHmiTabNavigation=TcHmiTabNavigation}(Controls.Beckhoff||(Controls.Beckhoff={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiTabNavigation","TcHmi.Controls.Beckhoff",TcHmi.Controls.Beckhoff.TcHmiTabNavigation);